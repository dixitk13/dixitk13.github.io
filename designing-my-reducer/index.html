<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:87.5%/1.65 -apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Roboto','Helvetica Neue','Arial',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Roboto','Helvetica Neue','Arial',sans-serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:inherit;font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Roboto','Helvetica Neue','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:inherit;font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Roboto','Helvetica Neue','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:inherit;font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Roboto','Helvetica Neue','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:inherit;font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Roboto','Helvetica Neue','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:inherit;font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Roboto','Helvetica Neue','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:inherit;font-family:-apple-system,'system-ui','BlinkMacSystemFont','Segoe UI','Roboto','Helvetica Neue','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}ul{margin-left:1.65rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.65rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;font-size:0.85rem;line-height:1.65rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;font-size:1rem;line-height:1.65rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}blockquote{margin-left:1.65rem;margin-right:1.65rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.65rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.65rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.65rem;margin-bottom:calc(1.65rem / 2);margin-top:calc(1.65rem / 2);}li > ul{margin-left:1.65rem;margin-bottom:calc(1.65rem / 2);margin-top:calc(1.65rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.65rem / 2);}code{font-size:0.85rem;line-height:1.65rem;}kbd{font-size:0.85rem;line-height:1.65rem;}samp{font-size:0.85rem;line-height:1.65rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.1rem;padding-right:1.1rem;padding-top:0.825rem;padding-bottom:calc(0.825rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><meta name="generator" content="Gatsby 5.14.4"/><meta data-react-helmet="true" name="description" content="nothin"/><meta data-react-helmet="true" name="image" content="https://dixitk13.github.io/static/img/dixitk13.jpg"/><meta data-react-helmet="true" name="google-site-verification" content="bB0Dzxm_gZibO1Ks7dMt4GQywVR3wl3oZVxZjis1710"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@dixitk13"/><meta data-react-helmet="true" name="twitter:title" content="Designing my TypeScript useReducer"/><meta data-react-helmet="true" name="twitter:description" content="nothin"/><meta data-react-helmet="true" name="twitter:image" content="https://dixitk13.github.io/static/img/dixitk13.jpg"/><meta data-react-helmet="true" property="og:url" content="https://dixitk13.github.io/designing-my-reducer/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Designing my TypeScript useReducer"/><meta data-react-helmet="true" property="og:description" content="nothin"/><meta data-react-helmet="true" property="og:image" content="https://dixitk13.github.io/static/img/dixitk13.jpg"/><style data-href="/styles.9bf26c245f0e59ea75af.css" data-identity="gatsby-global-css">html{font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;scroll-behavior:smooth}#___gatsby,#gatsby-focus-wrapper,body,html{height:100%}body{margin:0}button{background:none;border:none}.auto-link-header-class{margin-right:9px}.auto-link-header-class:hover svg{fill:#276ef1}.gatsby-highlight{margin:0;padding:0;width:100%}.gatsby-highlight pre[class*=language-],pre code[class*=language-]{box-shadow:unset;text-shadow:unset;top:-17px;width:100%}:not(pre)>code[class*=language-],pre[class*=language-]{background:#292c34!important;box-shadow:unset;text-shadow:unset!important}:not(pre)>code[class*=language-]{border-radius:3px!important}.token.atrule,.token.attr-value,.token.keyword{color:#f92672!important}pre[class*=language-].line-numbers{padding-left:2.8rem!important}.line-numbers>.line-numbers-rows{border-right:unset!important;padding-left:5px}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:3.8em;position:relative}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}.command-line-prompt{border-right:1px solid #999;display:block;float:left;font-size:100%;letter-spacing:-1px;margin-right:1em;pointer-events:none;text-align:right;-webkit-user-select:none;user-select:none}.command-line-prompt>span:before{content:" ";display:block;opacity:.7;padding-right:.8em}.command-line-prompt>span[data-user]:before{content:"[" attr(data-user) "@" attr(data-host) "] $"}.command-line-prompt>span[data-user=root]:before{content:"[" attr(data-user) "@" attr(data-host) "] #"}.command-line-prompt>span[data-prompt]:before{content:attr(data-prompt)}.command-line-prompt>span[data-continuation-prompt]:before{content:attr(data-continuation-prompt)}.command-line span.token.output{opacity:.7}</style><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><link rel="alternate" type="application/rss+xml" title="Dixit&#x27;s Blog Feed" href="/rss.xml"/><title data-react-helmet="true">Designing my TypeScript useReducer ¬∑ By Dixit Keshavbhai Patel</title><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/static/favicon-41287e0c27a5cdb20163df5c7cb1f6f5.ico"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/static/favicon-41287e0c27a5cdb20163df5c7cb1f6f5.ico"/><link data-react-helmet="true" rel="shortcut icon" type="image/png" href="/static/favicon-41287e0c27a5cdb20163df5c7cb1f6f5.ico"/><link rel="icon" href="/favicon-32x32.png?v=db9e577a600d00ca64d458ed3fd1fff2" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=db9e577a600d00ca64d458ed3fd1fff2"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=db9e577a600d00ca64d458ed3fd1fff2"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=db9e577a600d00ca64d458ed3fd1fff2"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=db9e577a600d00ca64d458ed3fd1fff2"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=db9e577a600d00ca64d458ed3fd1fff2"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=db9e577a600d00ca64d458ed3fd1fff2"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=db9e577a600d00ca64d458ed3fd1fff2"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=db9e577a600d00ca64d458ed3fd1fff2"/><style type="text/css">
    .auto-link-header-class.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .auto-link-header-class.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .auto-link-header-class svg,
    h2 .auto-link-header-class svg,
    h3 .auto-link-header-class svg,
    h4 .auto-link-header-class svg,
    h5 .auto-link-header-class svg,
    h6 .auto-link-header-class svg {
      visibility: hidden;
    }
    h1:hover .auto-link-header-class svg,
    h2:hover .auto-link-header-class svg,
    h3:hover .auto-link-header-class svg,
    h4:hover .auto-link-header-class svg,
    h5:hover .auto-link-header-class svg,
    h6:hover .auto-link-header-class svg,
    h1 .auto-link-header-class:focus svg,
    h2 .auto-link-header-class:focus svg,
    h3 .auto-link-header-class:focus svg,
    h4 .auto-link-header-class:focus svg,
    h5 .auto-link-header-class:focus svg,
    h6 .auto-link-header-class:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><style data-styled="" data-styled-version="6.1.18">.ftirWP{margin-bottom:1.45rem;border-left:10px solid #ccc;margin:1.5em 10px;padding:0.5em 10px;}/*!sc*/
data-styled.g1[id="Blockquote-sc-1mp3h74-0"]{content:"ftirWP,"}/*!sc*/
.gndbtp{border-radius:50%;margin:10px 30px 10px 20px;align-self:center;margin-bottom:1rem;background-size:cover;}/*!sc*/
data-styled.g2[id="CircularImage-sc-8purqy-0"]{content:"gndbtp,"}/*!sc*/
.kYvobW{text-decoration:none;padding:0;height:26px;width:90px;cursor:pointer;color:#1f2933;margin:0.4125rem;font-size:1.0725rem;text-align:center;background:rgb(236,237,238,0.7);border:1px solid #cdd4db;border-radius:3px;outline:none;}/*!sc*/
.kYvobW:active{background:rgba(0,0,0,0.1);}/*!sc*/
data-styled.g16[id="SimpleButton-sc-xiqqoj-0"]{content:"kYvobW,"}/*!sc*/
.bNPTLI{color:#1f2933;}/*!sc*/
data-styled.g17[id="p__StyledP-sc-1sps03o-0"]{content:"bNPTLI,"}/*!sc*/
.iQIsqj{color:#1f2933;text-decoration:none;}/*!sc*/
.iQIsqj:hover{color:rgba(39, 110, 241, 1);}/*!sc*/
data-styled.g18[id="a__Anchor-sc-bbk1o8-0"]{content:"iQIsqj,"}/*!sc*/
.igfDnC{color:#1f2933;height:55px;display:flex;justify-content:center;padding:0 20px;margin-bottom:-1px;}/*!sc*/
data-styled.g19[id="Navigation__Nav-sc-13cqq7h-0"]{content:"igfDnC,"}/*!sc*/
.fNdSCM{display:flex;min-width:200px;margin:0;list-style:none;}/*!sc*/
@media (min-width: 320px) and (max-width: 480px),(min-width: 481px) and (max-width: 768px){.fNdSCM{width:unset;}}/*!sc*/
.fNdSCM li{padding:0.825rem 1.2375rem 0 0;font-size:21px;outline:none;}/*!sc*/
.fNdSCM .active-nav-link{margin:0;color:#707070;text-decoration:none;text-decoration:none!important;}/*!sc*/
data-styled.g20[id="Navigation__NavUnorderedList-sc-13cqq7h-1"]{content:"fNdSCM,"}/*!sc*/
.eXDejF{margin:0;color:#1f2933;font-size:21px;text-decoration:none;}/*!sc*/
.eXDejF:hover{color:rgba(39, 110, 241, 1);}/*!sc*/
data-styled.g21[id="Navigation__NavLink-sc-13cqq7h-2"]{content:"eXDejF,"}/*!sc*/
.bqDrli{height:50px;position:fixed;bottom:20px;right:20px;width:50px;border-radius:50%;background:radial-gradient(#dae0ec,#cfd7e6);color:#1f2933;transition:all 0.3s ease;font-size:24px;z-index:10;opacity:0.3;}/*!sc*/
.bqDrli:hover{opacity:1;cursor:pointer;transform:translateY(-3px);}/*!sc*/
data-styled.g22[id="FloatingScrollToTop__FloatingButton-sc-s22w9y-0"]{content:"bqDrli,"}/*!sc*/
.hYssLu{position:absolute;bottom:6px;right:12px;}/*!sc*/
data-styled.g23[id="FloatingScrollToTop__EmojiImage-sc-s22w9y-1"]{content:"hYssLu,"}/*!sc*/
.grXTyY{min-height:100%;overflow:scroll;display:flex;flex-direction:column;align-items:center;margin:0 auto;background-color:rgba(245, 245, 245, 1);color:#1f2933;padding:1.2375rem;}/*!sc*/
.grXTyY h1{font-size:4.125rem;}/*!sc*/
@media (min-width: 320px) and (max-width: 480px){.grXTyY h1{font-size:2.475rem;}}/*!sc*/
.grXTyY main{width:40vw;max-width:40vw;height:100%;flex:1;}/*!sc*/
@media (min-width: 481px) and (max-width: 768px){.grXTyY main{width:50vw;max-width:50vw;}}/*!sc*/
@media (min-width: 320px) and (max-width: 480px){.grXTyY main{max-width:100%;width:100%;}}/*!sc*/
@media (min-width: 2560px){.grXTyY main{width:20vw;}}/*!sc*/
data-styled.g24[id="BlogWrapperView-sc-1rh1l7l-0"]{content:"grXTyY,"}/*!sc*/
.fvqbkU{display:flex;flex-direction:column;align-items:flex-start;font-size:1.8rem;margin:20px 5px 5px 5px;width:100%;max-width:40vw;}/*!sc*/
@media (min-width: 2560px){.fvqbkU{max-width:20vw;}}/*!sc*/
@media (min-width: 481px) and (max-width: 768px){.fvqbkU{max-width:50vw;}}/*!sc*/
@media (min-width: 320px) and (max-width: 480px){.fvqbkU{max-width:100%;min-height:160px;}}/*!sc*/
data-styled.g25[id="BlogWrapperView__BlogHeader-sc-1rh1l7l-1"]{content:"fvqbkU,"}/*!sc*/
.hOZZqo{display:flex;flex-direction:column;}/*!sc*/
.hOZZqo a,.hOZZqo h1{margin:0;font-size:2rem;color:#1f2933;text-decoration:none;}/*!sc*/
.hOZZqo span{font-size:1.2rem;opacity:0.8;}/*!sc*/
data-styled.g26[id="BlogWrapperView__BlogName-sc-1rh1l7l-2"]{content:"hOZZqo,"}/*!sc*/
.bBARGU{display:flex;align-items:center;justify-content:center;}/*!sc*/
data-styled.g27[id="BlogWrapperView__BlogHead-sc-1rh1l7l-3"]{content:"bBARGU,"}/*!sc*/
.FiyZi{top:10px;right:10px;position:absolute;}/*!sc*/
data-styled.g28[id="BlogWrapperView__FloatingThemeButton-sc-1rh1l7l-4"]{content:"FiyZi,"}/*!sc*/
.eUhrkJ{display:flex;flex-direction:column;align-items:flex-start;margin:0;width:100%;font-size:17px;}/*!sc*/
data-styled.g30[id="BlogMain-sc-aags4a-0"]{content:"eUhrkJ,"}/*!sc*/
.kimAsl{padding:1.65rem 0 0 0;width:100%;text-align:center;}/*!sc*/
.kimAsl p{opacity:0.8;font-size:1.2375rem;}/*!sc*/
.kimAsl p:after{content:"";margin:1.65rem auto;display:block;width:200px;height:2px;border-radius:50%;background-color:#1f2933;opacity:0.4;}/*!sc*/
data-styled.g31[id="BlogPostTemplate__BlogHeader-sc-aqkyp8-0"]{content:"kimAsl,"}/*!sc*/
.gNUCMZ{color:#1f2933;font-weight:900;font-size:40px;font-family:"Futura PT",-apple-system,sans-serif;}/*!sc*/
data-styled.g32[id="BlogPostTemplate__BlogTitle-sc-aqkyp8-1"]{content:"gNUCMZ,"}/*!sc*/
</style></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="BlogWrapperView-sc-1rh1l7l-0 grXTyY"><header class="BlogWrapperView__BlogHeader-sc-1rh1l7l-1 fvqbkU"><div class="BlogWrapperView__BlogHead-sc-1rh1l7l-3 bBARGU"><img src="/static/dixitk13-7dad23152e6eb46d39b576899160edfd.jpg" tabindex="0" loading="lazy" alt="..." height="80px" width="80px" class="CircularImage-sc-8purqy-0 gndbtp"/><div class="BlogWrapperView__BlogName-sc-1rh1l7l-2 hOZZqo"><a href="/"><h1>Dixit</h1></a><span>Software Engineer</span></div></div><nav aria-label="Main menu" id="web-nav" class="Navigation__Nav-sc-13cqq7h-0 igfDnC"><ul class="Navigation__NavUnorderedList-sc-13cqq7h-1 fNdSCM"><li><a title="Home" class="Navigation__NavLink-sc-13cqq7h-2 eXDejF" href="/">Home</a></li><li><a title="Blog" class="active-nav-link" href="/blog/">Blog</a></li><li><a title="Tags" class="Navigation__NavLink-sc-13cqq7h-2 eXDejF" href="/tags/">Tags</a></li><li><a title="About Me" class="Navigation__NavLink-sc-13cqq7h-2 eXDejF" href="/about/">About Me</a></li></ul></nav></header><span class="BlogWrapperView__FloatingThemeButton-sc-1rh1l7l-4 FiyZi"><button selected="" aria-label="Change the current theme" class="SimpleButton-sc-xiqqoj-0 SwitchView__SwitchViewContainer-sc-11k0hk1-0 kYvobW">light</button></span><button enable="" class="FloatingScrollToTop__FloatingButton-sc-s22w9y-0 bqDrli"><div role="img" aria-label="scroll to top" class="FloatingScrollToTop__EmojiImage-sc-s22w9y-1 hYssLu">üîù</div></button><main class="BlogMain-sc-aags4a-0 eUhrkJ"><div tabindex="0" class="BlogPostTemplate__BlogHeader-sc-aqkyp8-0 kimAsl"><h1 class="BlogPostTemplate__BlogTitle-sc-aqkyp8-1 gNUCMZ">Designing my TypeScript useReducer</h1><p>Last updated: <!-- -->2021-02-01<!-- --> ‚Ä¢<!-- --> <span>8 min read</span></p></div><p class="p__StyledP-sc-1sps03o-0 bNPTLI">In this article we‚Äôll go over how I design my application state in a TypeScript and React app
using useReducer hook and Context API. I use this technique across my app for maintaining the
application state.</p>
<h2 id="Why-useReducer" style="position:relative"><a href="#Why-useReducer" aria-label="Why useReducer permalink" class="a__Anchor-sc-bbk1o8-0 iQIsqj auto-link-header-class before"><span><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Why useReducer?</h2>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">State-management libraries like Redux/MobX still hold their pros/cons
for maintaing application state, but react state owns its position.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">Since the introduction of hooks, I‚Äôve primarily used react state
for state management, and when clubbed with Context API,
it starts behaving like <span><code class="language-text">all-purpose-flour</code></span>.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">React state is pretty lightweight, needs no extra libraries &amp;
can be quickly setup for smaller lightweight projects.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">But before we jump into this, lets do a quick recap.</p>
<h2 id="Recap-useReducer" style="position:relative"><a href="#Recap-useReducer" aria-label="Recap useReducer permalink" class="a__Anchor-sc-bbk1o8-0 iQIsqj auto-link-header-class before"><span><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Recap useReducer</h2>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI"><span><code class="language-text">useReducer</code></span> is the preferred hook you‚Äôd want to use when dealing with
complex state.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI"><span><code class="language-text">useReducer</code></span> uses a reducer function, along with initialState to define the
initial ‚Äúreducer‚Äù, which then returns you the current state value and
a special dispatch function.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">This dispatch function can be used to ‚Äúdispatch‚Äù actions to the reducer
which can be handled with a simple switch statement (just like <span><code class="language-text">redux</code></span> does) &amp;
the state then would have the updated values. The reference to the dispatch function
stays the same between FC (Functional Component) renders and can be directly passed down as props.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">Let‚Äôs look at a quick example, taken from <a href="https://reactjs.org/docs/hooks-reference.html#usereducer" target="_blank" rel="nofollow noopener noreferrer external" class="a__Anchor-sc-bbk1o8-0 iQIsqj">React‚Äôs documentation</a>:</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"increment"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"decrement"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">></span>
      <span class="token literal-property property">Count</span><span class="token operator">:</span> <span class="token punctuation">{</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"decrement"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"increment"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">In this example above, we see dispatch is sent special ‚Äúinstructions‚Äù like
<span><code class="language-text">increment</code></span> and <span><code class="language-text">decrement</code></span> to update the reducer state values. One can construct
special instructions here to update the state as desired.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">Hopefully that summarizes <span><code class="language-text">useReducer</code></span>. If not, do head over to
React‚Äôs documentation.</p>
<blockquote class="Blockquote-sc-1mp3h74-0 ftirWP">
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">Pro-tip</p>
</blockquote>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI"><span><code class="language-text">useState</code></span> uses <span><code class="language-text">useReducer</code></span> under the hood! Let‚Äôs see how.</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">myreducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> action<span class="token punctuation">.</span>state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useReducer</span><span class="token punctuation">(</span>myreducer<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">setState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">flag</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">state</span><span class="token operator">:</span> flag <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// is equaivalent to</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">So if one were to modify the dispatch function to just take the state
you want the reducer to set, you‚Äôd get the <span><code class="language-text">useState</code></span> behavior right away!</p>
<h2 id="Recap-useContext" style="position:relative"><a href="#Recap-useContext" aria-label="Recap useContext permalink" class="a__Anchor-sc-bbk1o8-0 iQIsqj auto-link-header-class before"><span><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Recap useContext</h2>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">The React Context API helps developers truely have ‚Äúglobal‚Äù react state that can be
accessed without props being passed to children and grandchildren, AKA prop-drilling,
and helps skip re-rendering components which don‚Äôt use that context-state -
ultimately leading to dynamic UI and cleaner code.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">The <span><code class="language-text">useContext</code></span> hook is an alternative of <span><code class="language-text">Context.Consumer</code></span> API, allowing
developers to consume values under a Provider.</p>
<span><div class="gatsby-highlight" data-language="tsx"><pre style="counter-reset: linenumber 0" class="language-tsx line-numbers"><code class="language-tsx"><span class="token keyword">type</span> <span class="token class-name">Theme</span> <span class="token operator">=</span> <span class="token string">"light"</span> <span class="token operator">|</span> <span class="token string">"dark"</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">ThemeContextState</span> <span class="token punctuation">{</span>
  theme<span class="token operator">?</span><span class="token operator">:</span> Theme<span class="token punctuation">;</span>
  setTheme<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">createContext</span><span class="token generic class-name"><span class="token operator">&lt;</span>ThemeContextState<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">UseContextApp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ThemeWrapperApp</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Radios</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Status</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Child #1<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>large<span class="token punctuation">"</span></span> <span class="token attr-name">enableRenderCount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Child #2<span class="token punctuation">"</span></span> <span class="token attr-name">enableRenderCount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildWithContext</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Card</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Card</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ThemeWrapperApp</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Radios</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Status</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> theme <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>ThemeContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>status-bar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">VALUE: </span><span class="token punctuation">{</span><span class="token function">String</span><span class="token punctuation">(</span>theme<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">ThemeWrapperApp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> children <span class="token punctuation">}</span><span class="token operator">:</span> React<span class="token punctuation">.</span>PropsWithChildren<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>theme<span class="token punctuation">,</span> setTheme<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span>Theme<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">"light"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ThemeContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> theme<span class="token punctuation">,</span> setTheme <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ThemeContext.Provider</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">ChildWithContext</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> theme <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>ThemeContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Child-N<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mini<span class="token punctuation">"</span></span> <span class="token attr-name">enableRenderCount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></span>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">The above example looks like the gif shown here. Each child card has
a number at the top right corner, indicating how many times it was rendered.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">We start by creating the context at L8, and using the Provider API to wrap all its
children like L31. The Status component consumes the context and updates the same.
At L17 the <span><code class="language-text">ChildWithContext</code></span> is a Child which is two level‚Äôs from the top-context.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">In the GIF we see all the Child cards are skipped from rendering when the radio buttons
actually change the value from the parent, except the one‚Äôs consuming it.</p>
<img src="/blog/designing-my-usereducer/context-skipping-children.gif" alt="usecontext-skipping-children"/>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">That‚Äôs React Context!</p>
<h2 id="Counter" style="position:relative"><a href="#Counter" aria-label="Counter permalink" class="a__Anchor-sc-bbk1o8-0 iQIsqj auto-link-header-class before"><span><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Counter</h2>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">Now its time to merge <span><code class="language-text">useReducer</code></span> and <span><code class="language-text">useContext</code></span>! Let‚Äôs try this with Counter
example first. But before we jump into the example, lets look at the core
file structure and follow that with the contents of the files.</p>
<h3>File Structure</h3>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">I like to keep my files co-located, so I try and keep them in a single folder, at least
the ones which are related. I‚Äôve tried another way as well, i.e. keeping hooks,
actions, styles, etc. together. There‚Äôs pros and cons to both these approaches IMO, but
lets stick with single folder approach for this one.</p>
<span><div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">src
‚îú‚îÄ‚îÄ App.tsx
‚îî‚îÄ‚îÄ Counter
‚îÇ   ‚îú‚îÄ‚îÄ Counter.tsx
‚îÇ   ‚îú‚îÄ‚îÄ actions.ts
‚îÇ   ‚îú‚îÄ‚îÄ index.ts
‚îÇ   ‚îú‚îÄ‚îÄ interface.ts
‚îÇ   ‚îú‚îÄ‚îÄ reducer.ts
‚îÇ   ‚îî‚îÄ‚îÄ useCounterState.tsx
‚îî‚îÄ‚îÄ index.tsx</code></pre></div></span>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">High-level overview for the files:</p>
<ul>
<li><span><code class="language-text">interface.ts</code></span>: holds the interfaces across the entire Counter example</li>
<li><span><code class="language-text">reducer.ts</code></span>: defines the reducer itself, along w/ initial state etc</li>
<li><span><code class="language-text">actions.ts</code></span>: functions which use the action interface &amp; can be used in React FCs</li>
<li><span><code class="language-text">Counter.tsx</code></span>: the real React FC, which will use the actions, state, etc</li>
<li><span><code class="language-text">useCounterState.tsx</code></span>: is the hook where the reducer and context API are fused together</li>
</ul>
<h3>Interfaces</h3>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">For this quick example, the state will only capture the current value which
will be called <span><code class="language-text">CounterState</code></span>.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">There will be only two kinds of actions viz. Increment and Decrement.
We‚Äôll create a Enum for that, let‚Äôs call it <span><code class="language-text">CounterStateEnum</code></span>. This will behave
like a <a href="https://dixitk13.github.io/typescript-discriminator" target="_blank" rel="nofollow noopener noreferrer external" class="a__Anchor-sc-bbk1o8-0 iQIsqj">typescript discriminator</a>
for reducer switch case - the case will switch on <span><code class="language-text">action.type</code></span> but we‚Äôll get to
that in the reducer section.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">To enable that we create a generic union type called <span><code class="language-text">CounterAction</code></span> - which
will be a combination of <span><code class="language-text">CounterIncrementAction</code></span> and <span><code class="language-text">CounterDecrementAction</code></span>.</p>
<span><div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">CounterState</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">enum</span> CounterStateEnum <span class="token punctuation">{</span>
  <span class="token constant">COUNTER_STATE_INCREMENT</span> <span class="token operator">=</span> <span class="token string">"COUNTER_STATE_INCREMENT"</span><span class="token punctuation">,</span>
  <span class="token constant">COUNTER_STATE_DECREMENT</span> <span class="token operator">=</span> <span class="token string">"COUNTER_STATE_DECREMENT"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">CounterIncrementAction</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> CounterStateEnum<span class="token punctuation">.</span><span class="token constant">COUNTER_STATE_INCREMENT</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">CounterDecrementAction</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> CounterStateEnum<span class="token punctuation">.</span><span class="token constant">COUNTER_STATE_DECREMENT</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">CounterAction</span> <span class="token operator">=</span> CounterIncrementAction <span class="token operator">|</span> CounterDecrementAction<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">CounterDispatch</span> <span class="token operator">=</span> React<span class="token punctuation">.</span>Dispatch<span class="token operator">&lt;</span>CounterAction<span class="token operator">></span><span class="token punctuation">;</span></code></pre></div></span>
<h2 id="Actions" style="position:relative"><a href="#Actions" aria-label="Actions permalink" class="a__Anchor-sc-bbk1o8-0 iQIsqj auto-link-header-class before"><span><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Actions</h2>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">Moving on to action creators, as some may call them. These will be functions
which we can directly invoke from the components themselves.</p>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">We‚Äôll define two viz. <span><code class="language-text">counterIncrement</code></span> and <span><code class="language-text">counterDecrement</code></span> and
incrementing/decrementing respectively.</p>
<span><div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">const</span> counterIncrement <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> CounterIncrementAction <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> CounterStateEnum<span class="token punctuation">.</span><span class="token constant">COUNTER_STATE_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> counterDecrement <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> CounterDecrementAction <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> CounterStateEnum<span class="token punctuation">.</span><span class="token constant">COUNTER_STATE_DECREMENT</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div></span>
<h2 id="Reducer" style="position:relative"><a href="#Reducer" aria-label="Reducer permalink" class="a__Anchor-sc-bbk1o8-0 iQIsqj auto-link-header-class before"><span><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Reducer</h2>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">The core-functionality of your hook will be defined here. For the counter example,
it might seem very simple use-case, the same technique can be extended further handle
more complex states. Let‚Äôs take a look at the implementation now.</p>
<span><div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">const</span> initialCounterState<span class="token operator">:</span> CounterState <span class="token operator">=</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span>state<span class="token operator">:</span> CounterState<span class="token punctuation">,</span> action<span class="token operator">:</span> CounterAction<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> CounterStateEnum<span class="token punctuation">.</span><span class="token constant">COUNTER_STATE_INCREMENT</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        value<span class="token operator">:</span> state<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> CounterStateEnum<span class="token punctuation">.</span><span class="token constant">COUNTER_STATE_DECREMENT</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        value<span class="token operator">:</span> state<span class="token punctuation">.</span>value <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Unhandled action type</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div></span>
<h2 id="useReducerState" style="position:relative"><a href="#useReducerState" aria-label="useReducerState permalink" class="a__Anchor-sc-bbk1o8-0 iQIsqj auto-link-header-class before"><span><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>useReducerState</h2>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">We‚Äôll use two context instances here:</p>
<ul>
<li><span><code class="language-text">CounterDispatchContext</code></span>: for storing the dispatch function</li>
<li><span><code class="language-text">CounterStateContext</code></span>: for consuming the state</li>
</ul>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">Splitting this into two sections, helps one prevent re-rendering
components which dispatch an update in state but don‚Äôt really
consume the state itself.</p>
<span><div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> CounterStateContext <span class="token operator">=</span>
  React<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">createContext</span><span class="token generic class-name"><span class="token operator">&lt;</span>CounterState<span class="token operator">></span></span></span><span class="token punctuation">(</span>initialCounterState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CounterDispatchContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">createContext</span><span class="token generic class-name"><span class="token operator">&lt;</span>CounterDispatch<span class="token operator">></span></span></span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">undefined</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></span>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">We can define corresponding hooks to take advantage of the <span><code class="language-text">useContext</code></span> hooks
and even define a hook to extract both these variables together!</p>
<span><div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">const</span> useCounterState <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> CounterState <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>CounterStateContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useCounterDispatch <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> CounterDispatch <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>CounterDispatchContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useCounterContext</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">useCounterState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useCounterDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">,</span>
    dispatch<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div></span>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">We also define a Provider <span><code class="language-text">CounterProvider</code></span> which sprinkles and allows children
variables to consume state/dispatch along with initializing <span><code class="language-text">useReducer</code></span>. This
<span><code class="language-text">CounterProvider</code></span> can be used for consuming both these context instances defined
allow for a cleaner import.</p>
<span><div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">CounterProviderProps</span> <span class="token punctuation">{</span>
  children<span class="token operator">:</span> React<span class="token punctuation">.</span>ReactChild <span class="token operator">|</span> React<span class="token punctuation">.</span>ReactChildren<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">CounterProvider</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> CounterProviderProps<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialCounterState<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>CounterDispatchContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>dispatch<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>CounterStateContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>CounterStateContext<span class="token punctuation">.</span>Provider<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>CounterDispatchContext<span class="token punctuation">.</span>Provider<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div></span>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">This above is how the <span><code class="language-text">CounterProvider</code></span> looks like.</p>
<h3>index.ts</h3>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">An index file to export everything.</p>
<span><div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">"./useCounterState"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">"./interface"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">"./actions"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">"./reducer"</span><span class="token punctuation">;</span>

<span class="token operator">...</span>and more</code></pre></div></span>
<h3>Counter</h3>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">The simple FC, consuming the state &amp; using the dispatch functions</p>
<span><div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span>
  counterDecrement<span class="token punctuation">,</span>
  counterIncrement<span class="token punctuation">,</span>
  useCounterState<span class="token punctuation">,</span>
  useCounterDispatch<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">Counter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useCounterDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCounterState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">counterIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">counterDecrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"counter-container"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"actions"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increment<span class="token punctuation">}</span><span class="token operator">></span>Increment<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>decrement<span class="token punctuation">}</span><span class="token operator">></span>Decrement<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div></span>
<h2 id="App" style="position:relative"><a href="#App" aria-label="App permalink" class="a__Anchor-sc-bbk1o8-0 iQIsqj auto-link-header-class before"><span><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>App</h2>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">How would you consume this inside an App?</p>
<span><div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> CounterProvider<span class="token punctuation">,</span> Counter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./Counter"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>CounterProvider<span class="token operator">></span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>Counter <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>CounterProvider<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div></span>
<img src="/blog/designing-my-usereducer/demo-app.gif" alt="demo-app"/>
<p class="p__StyledP-sc-1sps03o-0 bNPTLI">Here‚Äôs a codepen putting all of it together. <a href="https://codesandbox.io/s/my-context-0k8dd" target="_blank" rel="nofollow noopener noreferrer external" class="a__Anchor-sc-bbk1o8-0 iQIsqj">https://codesandbox.io/s/my-context-0k8dd</a></p></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/designing-my-reducer/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-4aaad74060f9c2210b29.js\"],\"component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-aoc-2025-aoc-2025-mdx\":[\"/component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-aoc-2025-aoc-2025-mdx-8d36005eb7056104bdb9.js\"],\"component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-designing-my-usereducer-designing-my-usereducer-mdx\":[\"/component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-designing-my-usereducer-designing-my-usereducer-mdx-6e86d63dfd31d42731b6.js\"],\"component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-draft-pull-requests-draft-pull-requests-mdx\":[\"/component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-draft-pull-requests-draft-pull-requests-mdx-d154c05fcf6feaaa2165.js\"],\"component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-fancies-and-arrays-fancies-and-arrays-mdx\":[\"/component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-fancies-and-arrays-fancies-and-arrays-mdx-15abf9a18ccfea46eb58.js\"],\"component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-one-liner-chats-one-liner-chats-mdx\":[\"/component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-one-liner-chats-one-liner-chats-mdx-a5f18b0ab7186895a438.js\"],\"component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-regular-expressions-regular-expressions-mdx\":[\"/component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-regular-expressions-regular-expressions-mdx-28ba92ffe3edbca188fa.js\"],\"component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-simple-count-downtimer-simple-count-downtimer-mdx\":[\"/component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-simple-count-downtimer-simple-count-downtimer-mdx-db23c6ce883569d46fcc.js\"],\"component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-tribal-knowledge-tribal-knowledge-mdx\":[\"/component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-tribal-knowledge-tribal-knowledge-mdx-d591fee194f8183a9410.js\"],\"component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-typescript-discriminator-typescript-discriminator-mdx\":[\"/component---src-components-blog-blog-post-template-blog-post-template-js-content-file-path-static-blog-typescript-discriminator-typescript-discriminator-mdx-0fada65c11b05ef8f25f.js\"],\"component---src-components-tags-tag-detail-js\":[],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-8fb8be1349935709a881.js\"],\"component---src-pages-about-js\":[\"/component---src-pages-about-js-4e13b3754d87695460f3.js\"],\"component---src-pages-blog-js\":[\"/component---src-pages-blog-js-99ce92622afcc0e5830d.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-2136454bbe48ad0ef10f.js\"],\"component---src-pages-tags-js\":[\"/component---src-pages-tags-js-57997e3f8876fe7e72d6.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="b1bfca066197e6c90fd7";</script><script src="/webpack-runtime-106c2440158dc2d8108a.js" async></script><script src="/framework-cb89c97f972256240f92.js" async></script><script src="/app-4aaad74060f9c2210b29.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>